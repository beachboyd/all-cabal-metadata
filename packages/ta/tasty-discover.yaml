homepage: https://github.com/lwm/tasty-discover#readme
changelog-type: markdown
hash: 2d89c8e228130dd8a30724864a95fafbd932c20775f795600754b2010cda74b5
test-bench-deps:
  tasty-smallcheck: -any
  base: -any
  tasty-hedgehog: -any
  tasty-discover: -any
  tasty-hspec: -any
  filepath: ! '>=1.3 && <2.0'
  hedgehog: -any
  containers: ! '>=0.4 && <1.0'
  tasty-quickcheck: -any
  tasty-hunit: -any
  tasty: -any
  Glob: ! '>=0.8 && <1.0'
  directory: ! '>=1.1 && <2.0'
maintainer: Luke Murphy <lukewm@riseup.net>
synopsis: Test discovery for the tasty framework.
changelog: ! '# Change Log


  All notable changes to this project will be documented in this file.


  The format is based on [Keep a Changelog] and this project adheres to

  [Semantic Versioning].


  [Keep a Changelog]: http://keepachangelog.com/

  [Semantic Versioning]: http://semver.org/


  # 4.1.2 [2017-12-19]


  ## Fixed

  - Escaping issues for the Windows platform (see issue [#124]).


  [#124]: https://github.com/lwm/tasty-discover/issues/124


  # 4.1.1 [2017-09-26]


  ## Fixed

  - Incorrect test case doing bad comparison (see issue [#123]).


  [#123]: https://github.com/lwm/tasty-discover/issues/123


  # 4.1.0 [2017-09-26]


  ## Fixed

  - Find tests recursively in test directory. (see pull request [#122]).


  ## Added

  - Add ability to override tasty arguments (see pull request [#120]).


  [#120]: https://github.com/lwm/tasty-discover/pull/120

  [#122]: https://github.com/lwm/tasty-discover/pull/122


  # 4.0.0 [2017-09-01]


  ## Changed

  - Deprecated `--[no-]module-suffix` for `--modules` (see pull request [#117]).

  - Deprecated `--ignore-module` for `--ignores` (see pull request [#117]).


  ## Added

  - `tasty-hedgehog` is now a supported test library.


  ## Removed

  - `case_` prefixes have been removed.


  [#117]: https://github.com/lwm/tasty-discover/pull/117


  # 3.0.2 [2017-06-05]


  ### Fixed

  - Make upper bounds for dependencies looser.

  - Fix typo in README.md option documentation.


  ### Remove

  - Remove TOC, the hyperlinks weren''t working on Hackage.


  # 3.0.1 [2017-06-04]


  ### Fixed

  - Fixed CHANGELOG.md rendering for Hackage (see pull request [#106]).


  ### Added

  - Add missing --tree-display documentation note (see pull request [#107]).


  [#107]: https://github.com/lwm/tasty-discover/pull/107

  [#106]: https://github.com/lwm/tasty-discover/pull/106


  # 3.0.0 [2017-06-03]


  ### Added

  - Add --tree-display configuration option (see pull request [#103]).


  ### Changed

  - Deprecate `case_` in favour of `unit_` for HUnit test cases (see pull request
  [#97]).


  ### Fixed

  - Correctly handle sub-directories when using --no-module-suffix (see pull request
  [#102]).


  [#97]: https://github.com/lwm/tasty-discover/pull/97

  [#102]: https://github.com/lwm/tasty-discover/pull/102

  [#103]: https://github.com/lwm/tasty-discover/pull/103


  # 2.0.3 [2017-04-13]


  ### Fixed

  - Make the Cabal description more clear for Hackage.


  # 2.0.2 [2017-04-13]


  ### Added

  - README.md and CHANGELOG.md included for Hackage (see pull request [#96]).

  - Re-add stylish-haskell automated checking (see pull request [#88]).


  [#88]: https://github.com/lwm/tasty-discover/pull/88

  [#96]: https://github.com/lwm/tasty-discover/pull/96


  ## 2.0.1 [2017-03-18]


  ### Fixed

  - Fix flaky test comparison (see pull request [#86]).


  [#86]: https://github.com/lwm/tasty-discover/pull/86


  ### Removed

  - Remove the Test.Tasty.Type module (see pull request [#83]).


  [#83]: https://github.com/lwm/tasty-discover/pull/83


  ## 2.0.0 [2017-03-15]


  ### Added

  - Add new hpack format.

  - Add generator style test discovery from tasty-auto.

  - Add new configuration options: debug, ingredients and module name.

  - Add unit tests for all functionality.


  ### Fixed

  - Re-license to MIT.


  ### Removed

  - RTD documentation.

  - TemplateHaskell dependency

  - Example project and integration test project.


  ### Changed

  - Move all tests into test folder.


  ## 1.1.0 [2017-01-19]


  ### Added

  - Add --ignore-module configuration option.


  ## 1.0.1 [2017-11-13]


  ### Added

  - Add Cabal and Documentation testing on Travis CI.


  ### Fixed

  - Include missing extra-source-files.

  - Slim down LICENSE.md and mark as GPL-3 in Cabal file.


  ## 1.0.0 [2016-11-04]


  ### Added

  - Add documentation on RTD.

  - Release on Hackage and Stackage.


  ## 0.0.3 [2016-09-20]


  ### Added

  - --no-module-suffix configuration option.


  ## 0.0.2 [2016-02-20]


  ### Added

  - --module-suffix configuration option.


  ## 0.0.1 [2016-02-13]


  - tasty-discover initial release.

'
basic-deps:
  base: ! '>=4.8 && <5.0'
  tasty-discover: -any
  filepath: ! '>=1.3 && <2.0'
  containers: ! '>=0.4 && <1.0'
  Glob: ! '>=0.8 && <1.0'
  directory: ! '>=1.1 && <2.0'
all-versions:
- '1.0.0'
- '1.0.1'
- '1.1.0'
- '2.0.0'
- '2.0.1'
- '2.0.2'
- '2.0.3'
- '3.0.0'
- '3.0.1'
- '3.0.2'
- '4.0.0'
- '4.1.0'
- '4.1.1'
- '4.1.2'
author: Luke Murphy
latest: '4.1.2'
description-type: markdown
description: ! "[![Build Status](https://travis-ci.org/lwm/tasty-discover.svg?branch=master)](https://travis-ci.org/lwm/tasty-discover)\n[![tasty-discover-nightly](http://stackage.org/package/tasty-discover/badge/nightly)](http://stackage.org/nightly/package/tasty-discover)\n[![tasty-discover-lts](http://stackage.org/package/tasty-discover/badge/lts)](http://stackage.org/lts/package/tasty-discover)\n[![Hackage
  Status](https://img.shields.io/hackage/v/tasty-discover.svg)](http://hackage.haskell.org/package/tasty-discover)\n[![GitHub
  license](https://img.shields.io/badge/license-MIT-brightgreen.svg)](https://raw.githubusercontent.com/lwm/tasty-discover/master/LICENSE)\n\n#
  tasty-discover\n\nAutomatic test discovery and runner for the [tasty framework].\n\n[tasty
  framework]: https://github.com/feuerbach/tasty\n\n# Maintenance\n\nIf you're interested
  in helping maintain this package, please let @lwm know!\n\nWe're currently two people,
  @minad included, keeping an eye and trying to respond to issues.\n\nI currently
  have less and less time that I can spare to work on this. Any help appreciated.\n\n#
  Getting Started\n\nThere's 4 simple steps:\n\n  1. [Create a test driver file in
  the test directory](#create-test-driver-file)\n  2. [Mark the driver file as the
  `main-is` in the test suite](#configure-cabal-test-suite)\n  3. [Mark tests with
  the correct prefixes](#write-tests)\n  4. [Customise test discovery as needed](#customise-discovery)\n\nCheck
  out the [example project](#example-project) to get moving quickly.\n\n## Create
  Test Driver File\n\nYou can name this file anything you want but it must contain
  the correct\npreprocessor definition for tasty-discover to run and also, to detect
  the\nconfiguration. It should be in the top level of the test directory.\n\nFor
  example (in `test/Driver.hs`):\n\n```\n{-# OPTIONS_GHC -F -pgmF tasty-discover #-}\n```\n\n##
  Configure Cabal Test Suite\n\nIn order for Cabal/Stack to know where the tests are,
  you'll need to configure\nthe main-is option of your test-suite to point to that
  file. In the following\nexample, the test driver file is called Driver.hs:\n\n```\ntest-suite
  test\n  main-is: Driver.hs\n  hs-source-dirs: tests\n  build-depends: base\n```\n\nIf
  you use [hpack], that might look like:\n\n[hpack]: https://github.com/sol/hpack\n\n```
  yaml\ntests:\n  test:\n    main: \"Driver.hs\"\n    source-dirs: \"test\"\n    dependencies:\n
  \   - \"base\"\n```\n\n# Write Tests\n\nCreate test modules and correctly prefix
  the tests with the name that\ncorresponds to the testing library you wish to run
  the test with:\n\n  - **prop_**: [QuickCheck](http://hackage.haskell.org/package/tasty-quickcheck)
  properties.\n  - **scprop_**: [SmallCheck](http://hackage.haskell.org/package/tasty-smallcheck)
  properties.\n  - **hprop_**: [Hedgehog](http://hackage.haskell.org/package/tasty-hedgehog)
  properties.\n  - **unit_**: [HUnit](http://hackage.haskell.org/package/tasty-hunit)
  test cases.\n  - **spec_**: [Hspec](http://hackage.haskell.org/package/tasty-hspec)
  specifications.\n  - **test_**: [Tasty](http://hackage.haskell.org/package/tasty)
  TestTrees.\n\nHere's an example test module:\n\n``` haskell\n{-# LANGUAGE ScopedTypeVariables
  #-}\n\nmodule ExampleTest where\n\nimport Data.List\nimport Test.Tasty\nimport Test.Tasty.HUnit\nimport
  Test.Tasty.Hspec\nimport Test.Tasty.QuickCheck\n\n-- HUnit test case\nunit_listCompare
  :: IO ()\nunit_listCompare = [1, 2, 3] `compare` [1,2] @?= GT\n\n-- QuickCheck property\nprop_additionCommutative
  :: Int -> Int -> Bool\nprop_additionCommutative a b = a + b == b + a\n\n-- SmallSheck
  property\nscprop_sortReverse :: [Int] -> Bool\nscprop_sortReverse list = sort list
  == sort (reverse list)\n\n-- Hspec specification\nspec_prelude :: Spec\nspec_prelude
  = do\n  describe \"Prelude.head\" $ do\n    it \"returns the first element of a
  list\" $ do\n      head [23 ..] `shouldBe` (23 :: Int)\n\n-- Tasty TestTree\ntest_multiplication
  :: [TestTree]\ntest_multiplication = [testProperty \"One is identity\" $ \\(a ::
  Int) -> a * 1 == a]\n\n-- Tasty IO TestTree\ntest_generateTree :: IO TestTree\ntest_generateTree
  = do\n  input <- pure \"Some input\"\n  pure $ testCase input $ pure ()\n\n-- Tasty
  IO [TestTree]\ntest_generateTrees :: IO [TestTree]\ntest_generateTrees = do\n  inputs
  <- pure [\"First input\", \"Second input\"]\n  pure $ map (\\s -> testCase s $ pure
  ()) inputs\n```\n\n# Customise Discovery\n\nYou configure tasty-discover by passing
  options to the test driver file.\n\n## No Arguments\n\nExample: `{-# OPTIONS_GHC
  -F -pgmF tasty-discover -optF --debug #-}`\n\n  - **--debug**: Output the contents
  of the generated module while testing.\n  - **--tree-display**: Display the test
  output results hierarchically.\n\n## With Arguments\n\nExample: `{-# OPTIONS_GHC
  -F -pgmF tasty-discover -optF --modules=\"*CustomTest.hs\" #-}`\n\n  - **--modules**:
  Which test modules to discover (with glob pattern).\n  - **--ignores**: Which test
  modules to ignore (with glob pattern).\n  - **--generated-module**: The name of
  the generated test module.\n  - **--ingredient**: Tasty ingredients to add to your
  test runner.\n\nIt is also possible to override tasty arguments with `-optF`:\n\n```
  bash\n{-# OPTIONS_GHC -F -pgmF tasty-discover -optF --hide-successes #-}\n```\n\n#
  Example Project\n\nSee the [testing for this package] for a fully configured example.\n\n[testing
  for this package]: https://github.com/lwm/tasty-discover/tree/master/test\n\n# Change
  Log\n\nPlease see the [CHANGELOG.md] for the latest changes.\n\n[CHANGELOG.md]:
  https://github.com/lwm/tasty-discover/blob/master/CHANGELOG.md\n\n# Deprecation
  Policy\n\nIf a breaking change is implemented, you'll see a major version increase,
  an\nentry in the [change log] and a compile time error with a deprecation warning\nand
  clear instructions on how to upgrade. Please do complain if we're doing\nthis too
  much.\n\n[change log]: https://github.com/lwm/tasty-discover/blob/master/CHANGELOG.md\n\n#
  Contributing\n\nAll contributions welcome!\n\n# Maintenance\n\nIf you're interested
  in helping maintain this package, please let [@lwm] know!\n\n[@lwm]: https://github.com/lwm\n\n#
  Acknowledgements\n\nThanks to [hspec-discover] and [tasty-auto] for making this
  possible.\n\n[hspec-discover]: https://hspec.github.io/hspec-discover.html\n[tasty-auto]:
  https://github.com/minad/tasty-auto\n"
license-name: MIT
