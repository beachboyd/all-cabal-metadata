homepage: https://github.com/vmchale/ats-pkg#readme
changelog-type: ''
hash: 6cb8429cfec763fce6e1ff416a27a16ffde9dc162adbc6a97375193b61565c8a
test-bench-deps: {}
maintainer: vamchale@gmail.com
synopsis: Package manager for ATS
changelog: ''
basic-deps:
  http-client: -any
  shake: -any
  ats-pkg: -any
  bytestring: -any
  ansi-wl-pprint: -any
  composition-prelude: ! '>=1.1.0.2'
  unix: -any
  filemanip: -any
  base: ! '>=4.7 && <5'
  dhall: -any
  text: -any
  shake-ext: ! '>=1.4.0.2'
  process: -any
  lens: -any
  tar: -any
  shake-ats: ! '>=0.3.0.4'
  http-client-tls: -any
  zlib: -any
  parallel-io: -any
  temporary: -any
  optparse-applicative: -any
  directory: -any
all-versions:
- '0.1.0.0'
- '0.2.0.0'
- '0.2.0.1'
- '0.3.0.1'
- '0.3.0.2'
- '1.0.0.0'
- '1.1.0.0'
- '1.1.0.1'
- '1.1.0.2'
- '1.1.0.3'
- '1.2.0.0'
- '1.2.0.1'
- '1.2.0.2'
- '1.2.0.3'
- '1.2.0.4'
- '1.2.0.5'
- '1.2.0.6'
- '1.2.0.7'
- '1.2.0.8'
- '1.2.1.0'
- '1.2.1.3'
- '1.3.0.0'
- '1.4.0.0'
- '1.4.0.1'
- '1.4.0.3'
- '1.4.0.6'
- '2.0.0.2'
- '2.0.0.4'
author: Vanessa McHale
latest: '2.0.0.4'
description-type: markdown
description: ! "# ats-pkg\n\n[![Build Status](https://travis-ci.org/vmchale/atspkg.svg?branch=master)](https://travis-ci.org/vmchale/atspkg)\n\nThis
  is a build system for ATS written in Haskell and configured with Dhall.\n\n## Installation\n\nThe
  easiest way to install is via a script, viz.\n\n```bash\n $ curl -sSl https://raw.githubusercontent.com/vmchale/atspkg/master/bash/install.sh
  | bash -s\n```\n\nAlternately, you can download\n[Cabal](https://www.haskell.org/cabal/download.html)
  and\n[GHC](https://www.haskell.org/ghc/download.html) and install with\n\n```bash\n
  $ cabal new-install ats-pkg --symlink-bindir ~/.local/bin\n```\n\n## Examples\n\n`atspkg`
  is configured with\n[Dhall](https://hackage.haskell.org/package/dhall/docs/Dhall-Tutorial.html).
  You\nmay wish to read the Dhall tutorial first, but you do not need to fully\nunderstand
  everything to get started.\n\n### Project Templates\n\nYou can use [pi](https://github.com/vmchale/project-init)
  with the builtin `ats`\ntemplate as follows:\n\n```\npi new ats cool-project\n```\n\nYou
  can then build with `atspkg build` or install with `atspkg install`.\n\nAlternately,
  you can start with a templated Haskell library calling ATS code:\n\n```\npi git
  vmchale/haskell-ats ambitious-project\n```\n\nwhich can be built with `atspkg build`
  followed by `cabal new-build`.\n\n### Building a Binary Package\n\nThe minimal configuration
  for a package with a binary target is as follows:\n\n```dhall\nlet pkg = https://raw.githubusercontent.com/vmchale/atspkg/master/pkgs/default.dhall\n\nin
  pkg //\n  { bin =\n    [\n      { src = \"src/program.dats\"\n      , target = \"target/program\"\n
  \     , gc = True\n      }\n    ]\n  }\n```\n\nYou need only specify the source
  file and the target; `atspkg` will parse your\nATS source files and track them (it
  will not track included C however).\n\n### Depending on a Library\n\nLibrary specifications
  are also written in Dhall. Let's look at an example:\n\n```dhall\nlet dep =\n  {
  libName = \"atscntrb-concurrency-0.1.0\"\n  , dir = \".atspkg/contrib\"\n  , url
  = \"https://github.com/vmchale/ats-concurrency/archive/0.1.0.tar.gz\"\n  , libVersion
  = [0,1,0]\n  }\n\nin dep\n```\n\nThis defines a dependency by pointing to its tarball.
  Unlike\n[cabal](https://www.haskell.org/cabal/) or other sophisticated package managers,\n`atspkg`
  does not allow transitive dependencies and it does not do any\nconstraint solving.
  Let's look at a simple example:\n\n```\nlet pkg = https://raw.githubusercontent.com/vmchale/atspkg/master/pkgs/default.dhall\n\nin
  pkg //\n  { bin =\n    [\n      { src = \"src/compat.dats\"\n      , target = \"target/poly\"\n
  \     , libs = ([] : List Text)\n      , gc = True\n      }\n    ]\n  , dependencies
  = [ https://raw.githubusercontent.com/vmchale/ats-concurrency/master/atspkg.dhall
  ]\n  }\n```\n\nAs Dhall is distributed, you can simply point to the package configuration
  URL\nto add a dependency. You can find several preconfigured packages\n[here](https://github.com/vmchale/atspkg/tree/master/pkgs),
  or you can write\nyour own configurations.\n\n### Building a Haskell Library\n\nYou
  can see an example [here](https://github.com/vmchale/fast-arithmetic). You\ncan
  configure the ATS side of things as follows:\n\n```\nlet pkg = https://raw.githubusercontent.com/vmchale/atspkg/master/pkgs/default.dhall\n\nin
  pkg //\n  { atsSource = [ \"ats-src/ambitious-project.dats\" ] }\n```\n\nThis just
  tells `atspkg` to look for a source file called\n`ats-src/ambitious-project.dats`,
  which will be compiled to\n`ambitious-project.c` in the default directory (i.e.
  `cbits`). You can then\ncall the generated code just as you would call C.\n\nYou
  may wish to consider\n[ats-setup](http://hackage.haskell.org/package/ats-setup)
  as well if you are\npackaging the Haskell for distribution.\n\n### Calling Haskell
  from ATS\n\nYou can see a demo [here](https://github.com/vmchale/fast-arithmetic).\nCurrently,
  there is not generic `Storable` instance for ATS, so the process is\na bit more
  involved than I'd like it to be.\n"
license-name: BSD3
