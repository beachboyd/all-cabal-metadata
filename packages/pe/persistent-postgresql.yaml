homepage: http://www.yesodweb.com/book/persistent
changelog-type: markdown
hash: ea53a0f1f4223b4884b5e19511325367879560d2432a02a976aa4da57c5fb760
test-bench-deps:
  bytestring: -any
  base: ! '>=4.9 && <5'
  time: -any
  persistent: -any
  unordered-containers: -any
  hspec: ! '>=2.4'
  text: -any
  persistent-qq: -any
  persistent-template: -any
  persistent-postgresql: -any
  HUnit: -any
  fast-logger: -any
  containers: -any
  quickcheck-instances: -any
  unliftio-core: -any
  monad-logger: -any
  transformers: -any
  QuickCheck: -any
  resourcet: -any
  persistent-test: -any
  aeson: -any
  vector: -any
  hspec-expectations: -any
maintainer: Michael Snoyman <michael@snoyman.com>
synopsis: Backend for the persistent library using postgresql.
changelog: |
  # Changelog for persistent-postgresql

  ## 2.10.1

  * Added support for the `constraint=` attribute to the Postgresql backend. [#979](https://github.com/yesodweb/persistent/pull/979)

  ## 2.10.0

  * Added question mark operators (`(?.), (?|.), (?&.)`) to `Database.Persist.Postgresql.JSON` [#863](https://github.com/yesodweb/persistent/pull/863)
  * Changes to certain types:
      * `PersistValue`: added `PersistArray` data constructor
      * `Filter`: Changed the `filterValue :: Either a [a]` to `filterValue :: FilterValue`

  ## 2.9.1
  * Add `openSimpleConnWithVersion` function. [#883](https://github.com/yesodweb/persistent/pull/883)

  ## 2.9.0

  * Added support for SQL isolation levels to via SqlBackend. [#812]
  * Fix [832](https://github.com/yesodweb/persistent/issues/832): `repsertMany` now matches `mapM_ (uncurry repsert)` and is atomic.

  ## 2.8.2

  Added module `Database.Persist.Postgresql.JSON` [#793](https://github.com/yesodweb/persistent/pull/793)

  * `PersistField` and `PersistFieldSql` instances for `Data.Aeson.Value`
  * Filter operators `(@>.)` and `(<@.)` to filter on JSON values

  ## 2.8.1.1

  * Added a more detailed error message when a `numeric` column's scale and precision can't be parsed. [#781](https://github.com/yesodweb/persistent/pull/781)

  ## 2.8.1

  * Implemented `connPutManySql` to utilize batched `putMany`. [#770](https://github.com/yesodweb/persistent/pull/770)

  ## 2.8.0

  * Switch from `MonadBaseControl` to `MonadUnliftIO`

  ## 2.6.3

  * Added new function `migrateEnableExtension`, to enable Postgres extensions in migrations.

  ## 2.6.2.2

  * Because `text` and `varchar` are synonyms in Postgresql, don't attempt to migrate between them. [#762](https://github.com/yesodweb/persistent/pull/762)

  ## 2.6.2.1

  * Fix bug where, if a custom column width was set, the field would be migrated every time [#742](https://github.com/yesodweb/persistent/pull/742)

  ## 2.6.2

  * Expose new functions: `withPostgresqlPoolWithVersion`, `withPostgresqlConnWithVersion` and `createPostgresqlPoolModifiedWithVersion`.

  ## 2.6.1

  * Match changes in persistent
  * Clean up warnings

  ## 2.6

  * Atomic upsert support for postgreSQL backend

  ## 2.5

  * changes for read/write typeclass split

  ## 2.2.2

  * Postgresql primary key is Int4, not Int8 [#519](https://github.com/yesodweb/persistent/issues/519)

  ## 2.2.1.2

  * Allow postgresql-simple 0.5

  ## 2.2.1.1

  Query pg_catalog instead of information_schema for metadata.
  This helps with permission issues as reported in issue #501

  ## 2.2.1

  * Fix treatment of `NULL`s inside arrays.  For example, now you
    can use `array_agg` on a nullable column.

  * New derived instances for `PostgresConf`: `Read`, `Data` and `Typeable`.

  * New `mockMigration` function.  Works like `printMigration` but
    doesn't need a database connection.

  * Fix typo on error message of the `FromJSON` instance of `PostgresConf`.

  ## 2.2

  * Optimize the `insertMany` function to insert all rows and retrieve their keys in one SQL query. [#407](https://github.com/yesodweb/persistent/pull/407)

  ## 2.1.6

  * Postgresql exceptions [#353](https://github.com/yesodweb/persistent/issues/353)

  ## 2.1.5.3

  Migrations for custom primary keys

  ## 2.1.5.2

  Support foreign key references to composite primary keys #389

  ## 2.1.5

  * Allow timestamp value in database to be serialized (presumes UTC timezone) [Yesod #391](https://github.com/yesodweb/persistent/issues/391)

  ## 2.1.4

  * Treat unknown extension types as PersistDbSpecific values [#385](https://github.com/yesodweb/persistent/pull/385)

  ## 2.1.3

  * Added a `Show` instance for `PostgresConf`.
  * `createPostgresqlPoolModified` added, see [relevant mailing list discussion](https://groups.google.com/d/msg/yesodweb/qUXrEN_swEo/O0pFwqwQIdcJ)

  ## 2.1.2.1

  Documentation typo fix

  ## 2.1.1

  Added `FromJSON` instance for `PostgresConf`.
basic-deps:
  bytestring: ! '>=0.10'
  base: ! '>=4.9 && <5'
  time: ! '>=1.6'
  persistent: ! '>=2.10 && <3'
  postgresql-libpq: ! '>=0.9.4.2 && <0.10'
  text: ! '>=1.2'
  resource-pool: -any
  conduit: ! '>=1.2.12'
  containers: ! '>=0.5'
  blaze-builder: -any
  unliftio-core: -any
  postgresql-simple: ! '>=0.6.1 && <0.7'
  monad-logger: ! '>=0.3.25'
  transformers: ! '>=0.5'
  resourcet: ! '>=1.1.9'
  aeson: ! '>=1.0'
all-versions:
- 0.0.0
- 0.1.0
- 0.2.0
- 0.2.1
- 0.2.1.1
- 0.2.2
- 0.3.0
- 0.3.1
- 0.3.1.1
- 0.4.0
- 0.4.0.1
- 0.5.0
- 0.6.0
- 0.6.1
- 0.6.1.1
- 0.6.1.2
- 0.6.1.3
- 0.7.0
- 0.8.0
- 0.8.1
- 0.8.1.1
- 0.8.1.2
- 0.9.0
- 0.9.0.1
- 0.9.0.2
- 0.9.1
- 1.0.0
- 1.0.1
- 1.0.2
- 1.0.3
- 1.1.0
- 1.1.1
- 1.1.2
- 1.1.2.1
- 1.1.3
- 1.1.3.1
- 1.2.0
- 1.2.1
- 1.2.1.1
- 1.2.1.2
- 1.2.1.3
- 1.3.0
- 1.3.0.1
- 1.3.0.2
- 1.3.0.3
- 1.3.0.4
- 1.3.0.5
- 1.3.1
- 1.3.1.1
- 1.3.1.2
- 1.3.1.3
- '2.1'
- 2.1.0.1
- 2.1.1
- 2.1.2
- 2.1.2.1
- 2.1.2.2
- 2.1.3
- 2.1.4
- 2.1.5
- 2.1.5.1
- 2.1.5.2
- 2.1.5.3
- 2.1.6
- '2.2'
- 2.2.1
- 2.2.1.1
- 2.2.1.2
- 2.2.2
- '2.5'
- '2.6'
- 2.6.1
- 2.6.2
- 2.6.2.1
- 2.6.2.2
- 2.6.3
- 2.8.0
- 2.8.1
- 2.8.1.1
- 2.8.2.0
- 2.9.0
- 2.9.1
- 2.10.0
- 2.10.1
author: Felipe Lessa, Michael Snoyman <michael@snoyman.com>
latest: 2.10.1
description-type: haddock
description: Based on the postgresql-simple package
license-name: MIT
