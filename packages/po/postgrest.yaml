homepage: https://postgrest.org
changelog-type: markdown
hash: cea433c8827ef55daa5a2a0cbac40e26c9a0f6f3d29f3714b815e80bba9caea0
test-bench-deps:
  hasql: ==1.1
  bytestring: -any
  lens-aeson: -any
  wai: -any
  case-insensitive: -any
  hspec-wai-json: -any
  heredoc: -any
  base: ! '>=4.8 && <4.10'
  time: -any
  base64-bytestring: -any
  hspec: -any
  monad-control: -any
  auto-update: -any
  process: -any
  async: -any
  protolude: ==0.2.2
  containers: -any
  lens: -any
  cassava: -any
  hspec-wai: ! '>=0.7.0'
  postgrest: -any
  regex-tdfa: -any
  contravariant: -any
  transformers-base: -any
  wai-extra: -any
  aeson-qq: -any
  http-types: -any
  hasql-pool: ==0.4.3
  aeson: -any
  hjsonschema: ==1.5.0.1
maintainer: Steve Ch√°vez <stevechavezast@gmail.com>
synopsis: REST API for any Postgres database
changelog: ! "# Change Log\n\nAll notable changes to this project will be documented
  in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\n\n##
  Unreleased\n\n### Added\n\n### Fixed\n\n## [5.1.0] - 2018-08-31\n\n### Added\n\n-
  #1099, Add support for getting json/jsonb by array index - @steve-chavez\n- #1145,
  Add materialized view columns to OpenAPI output - @steve-chavez\n- #709, Allow embedding
  on views with subselects/CTE - @steve-chavez\n- #1148, OpenAPI: add `required` section
  for the non-nullable columns - @laughedelic\n- #1158, Add summary to OpenAPI doc
  for RPC functions - @mdr1384\n\n### Fixed\n\n- #1113, Fix UPSERT failing when having
  a camel case PK column - @steve-chavez\n- #945, Fix slow start-up time on big schemas
  - @steve-chavez\n- #1129, Fix view embedding when table is capitalized - @steve-chavez\n-
  #1149, OpenAPI: Change `GET` response type to array - @laughedelic\n- #1152, Fix
  RPC failing when having arguments with reserved or uppercase keywords - @mdr1384\n-
  #905, Fix intermittent empty replies - @steve-chavez\n- #1139, Fix JWTIssuedAtFuture
  failure for valid iat claim - @steve-chavez\n- #1141, Fix app.settings resetting
  on pool timeout - @steve-chavez\n\n### Changed\n\n- #1099, Numbers in json path
  `?select=data->1->>key` now get treated as json array indexes instead of keys -
  @steve-chavez\n- #1128, Allow finishing a json path with a single arrow `->`. Now
  a json can be obtained without resorting to casting, Previously: `/json_arr?select=data->>2::json`,
  now: `/json_arr?select=data->2` - @steve-chavez\n- #724, Change server-host default
  of *4 to 127.0.0.1\n\n### Deprecated\n\n- #724, SIGHUP deprecated, SIGUSR1 should
  be used instead\n\n## [0.5.0.0] - 2018-05-14\n\n### Added\n\n- The configuration
  (e.g. `postgrest.conf`) now accepts arbitrary settings that will be passed through
  as session-local database settings. This can be used to pass in secret keys directly
  as strings, or via OS environment variables. For instance: `app.settings.jwt_secret
  = \"$(MYAPP_JWT_SECRET)\"` will take `MYAPP_JWT_SECRET` from the environment and
  make it available to postgresql functions as `current_setting('app.settings.jwt_secret')`.
  Only `app.settings.*` values in the configuration file are treated in this way.
  - @canadaduane\n- #256, Add support for bulk UPSERT with POST and single UPSERT
  with PUT - @steve-chavez\n- #1078, Add ability to specify source column in embed
  - @steve-chavez\n- #821, Allow embeds alias to be used in filters - @steve-chavez\n-
  #906, Add jspath configurable `role-claim-key` - @steve-chavez\n- #1061, Add foreign
  tables to OpenAPI output - @rhyamada\n\n### Fixed\n\n- #828, Fix computed column
  only working in public schema - @steve-chavez\n- #925, Fix RPC high memory usage
  by using parametrized query and avoiding json encoding - @steve-chavez\n- #987,
  Fix embedding with self-reference foreign key - @steve-chavez\n- #1044, Fix view
  parent embedding when having many views - @steve-chavez\n- #781, Fix accepting misspelled
  desc/asc ordering modificators - @onporat, @steve-chavez\n\n### Changed\n\n- #828,
  A `SET SCHEMA <db-schema>` is done on each request, this has the following implications:\n
  \ - Computed columns now only work if they belong to the db-schema\n  - Stored procedures
  might require a `search_path` to work properly, for further details see https://postgrest.org/en/v5.0/api.html#explicit-qualification\n-
  To use RPC now the `json_to_record/json_to_recordset` functions are needed, these
  are available starting from PostgreSQL 9.4 - @steve-chavez\n- Overloaded functions
  now depend on the `dbStructure`, restart/sighup may be needed for their correct
  functioning - @steve-chavez\n- #1098, Removed support for:\n  + curly braces `{}`
  in embeds, i.e. `/clients?select=*,projects{*}` can no longer be used, from now
  on parens `()` should be used `/clients?select=*,projects(*)` - @steve-chavez\n
  \ + \"in\" operator without parens, i.e. `/clients?id=in.1,2,3` no longer supported,
  `/clients?id=in.(1,2,3)` should be used - @steve-chavez\n  + \"@@\", \"@>\" and
  \"<@\" operators, from now on their mnemonic equivalents should be used \"fts\",
  \"cs\" and \"cd\" respectively - @steve-chavez\n\n## [0.4.4.0] - 2018-01-08\n\n###
  Added\n\n- #887, #601, #1007, Allow specifying dictionary and plain/phrase tsquery
  in full text search - @steve-chavez\n- #328, Allow doing GET on rpc - @steve-chavez\n-
  #917, Add ability to map RAISE errorcode/message to http status - @steve-chavez\n-
  #940, Add ability to map GUC to http response headers - @steve-chavez\n- #1022,
  Include git sha in version report - @begriffs\n- Faster queries using json_agg -
  @ruslantalpa\n\n### Fixed\n\n- #876, Read secret files as binary, discard final
  LF if any - @eric-brechemier\n- #968, Treat blank proxy uri as missing - @begriffs\n-
  #933, OpenAPI externals docs url to current version - @steve-chavez\n- #962, OpenAPI
  don't err on nonexistent schema - @steve-chavez\n- #954, make OpenAPI rpc output
  dependent on user privileges - @steve-chavez\n- #955, Support configurable aud claim
  - @statik\n- #996, Fix embedded column conflicts table name - @grotsev\n- #974,
  Fix RPC error when function has single OUT param - @steve-chavez\n- #1021, Reduce
  join size in allColumns for faster program start - @nextstopsun\n- #411, Remove
  the need for pk in &select for parent embed - @steve-chavez\n- #1016, Fix anonymous
  requests when configured with jwt-aud - @ruslantalpa\n\n## [0.4.3.0] - 2017-09-06\n\n###
  Added\n\n- #567, Support more JWT signing algorithms, including RSA - @begriffs\n-
  #889, Allow more than two conditions in a single and/or - @steve-chavez\n- #883,
  Binary output support for RPC - @steve-chavez\n- #885, Postgres COMMENTs on SCHEMA/TABLE/COLUMN
  are used for OpenAPI - @ldesgoui\n- #907, Ability to embed using a specific relation
  when there are multiple between tables - @ruslantalpa\n- #930, Split table comment
  on newline to get OpenAPI operation summary and description - @daurnimator\n- #938,
  Support for range operators - @russelldavies\n\n### Fixed\n\n- #877, Base64 secret
  read from a file ending with a newline - @eric-brechemier\n- #896, Boolean env var
  interpolation in config file - @begriffs\n- #885, OpenAPI repetition reduced by
  using more definitions- @ldesgoui\n- #924, Improve relations initialization time
  - @9too\n- #927, Treat blank pre-request as missing - @begriffs\n\n### Changed\n\n-
  #938, Deprecate symbol operators with mnemonic names. - @russelldavies\n\n## [0.4.2.0]
  - 2017-06-11\n\n### Added\n\n- #742, Add connection retrying on startup and SIGHUP
  - @steve-chavez\n- #652, Add and/or params for complex boolean logic - @steve-chavez\n-
  #808, Env var interpolation in config file (helps Docker) - @begriffs\n- #878 -
  CSV output support for RPC - @begriffs\n\n### Fixed\n\n- #822, Treat blank string
  JWT secret as no secret - @begriffs\n\n## [0.4.1.0] - 2017-04-25\n\n### Added\n-
  Allow requesting binary output on GET - @steve-chavez\n- Accept clients requesting
  `Content-Type: application/json` from / - @feynmanliang\n- #493, Updating with empty
  JSON object makes zero updates @koulakis\n- Make HTTP headers and cookies available
  as GUCs #800 - @ruslantalpa\n- #701, Ability to quote values on IN filters - @steve-chavez\n-
  #641, Allow IN filter to have no values - @steve-chavez\n\n### Fixed\n- #827, Avoid
  Warp reaper, extend socket timeout to 1 hour - @majorcode\n- #791, malformed nested
  JSON error - @diogob\n- Resource embedding in views referencing tables in public
  schema - @fab1an\n- #777, Empty body is allowed when calling a non-parameterized
  RPC - @koulakis\n- #831, Fix proc resource embedding issue with search_path - @steve-chavez\n-
  #547, Use read-only transaction for stable/immutable RPC - @begriffs\n\n## [0.4.0.0]
  - 2017-01-19\n\n### Added\n- Allow test database to be on another host - @dsimunic\n-
  `Prefer: params=single-object` to treat payload as single json argument in RPC -
  @dsimunic\n- Ability to generate an OpenAPI spec - @mainx07, @hudayou, @ruslantalpa,
  @begriffs\n- Ability to generate an OpenAPI spec behind a proxy - @hudayou\n- Ability
  to set addresses to listen on - @hudayou\n- Filtering, shaping and embedding with
  &select for the /rpc path - @ruslantalpa\n- Output names of used-defined types (instead
  of 'USER-DEFINED') - @martingms\n- Implement support for singular representation
  responses for POST/PATCH requests - @ehamberg\n- Include RPC endpoints in OpenAPI
  output - @begriffs, @LogvinovLeon\n- Custom request validation with `--pre-request`
  argument - @begriffs\n- Ability to order by jsonb keys - @steve-chavez\n- Ability
  to specify offset for a deeper level - @ruslantalpa\n- Ability to use binary base64
  encoded secrets - @TrevorBasinger\n\n### Fixed\n- Do not apply limit to parent items
  - @ruslantalpa\n- Fix bug in relation detection when selecting parents two levels
  up by using the name of the FK - @ruslantalpa\n- Customize content negotiation per
  route - @begriffs\n- Allow using nulls order without explicit order direction -
  @steve-chavez\n- Fatal error on postgres unsupported version, format supported version
  in error message - @steve-chavez\n- Prevent database memory cosumption by prepared
  statements caches - @ruslantalpa\n- Use specific columns in the RETURNING section
  - @ruslantalpa\n- Fix columns alias for RETURNING - @steve-chavez\n\n### Changed\n-
  Replace `Prefer: plurality=singular` with `Accept: application/vnd.pgrst.object`
  - @begriffs\n- Standardize arrays in responses for `Prefer: return=representation`
  - @begriffs\n- Calling unknown RPC gives 404, not 400 - @begriffs\n- Use HTTP 400
  for raise\\_exception - @begriffs\n- Remove non-OpenAPI schema description - @begriffs\n-
  Use comma rather than semicolon to separate Prefer header values - @begriffs\n-
  Omit total query count by default - @begriffs\n- No more reserved `jwt_claims` return
  type - @begriffs\n- HTTP 401 rather than 400 for expired JWT - @begriffs\n- Remove
  default JWT secret - @begriffs\n- Use GUC request.jwt.claim.foo rather than postgrest.claims.foo
  - @begriffs\n- Use config file rather than command line arguments - @begriffs\n\n##
  [0.3.2.0] - 2016-06-10\n\n### Added\n- Reload database schema on SIGHUP - @begriffs\n-
  Support \"-\" in column names - @ruslantalpa\n- Support column/node renaming `alias:column`
  - @ruslantalpa\n- Accept posts from HTML forms - @begriffs\n- Ability to order embedded
  entities - @ruslantalpa\n- Ability to paginate using &limit and &offset parameters
  - @ruslantalpa\n- Ability to apply limits to embedded entities and enforce --max-rows
  on all levels - @ruslantalpa, @begriffs\n- Add allow response header in OPTIONS
  - @begriffs\n\n### Fixed\n- Return 401 or 403 for access denied rather than 404
  - @begriffs\n- Omit Content-Type header for empty body - @begriffs\n- Prevent role
  from being changed twice - @begriffs\n- Use read-only transaction for read requests
  - @ruslantalpa\n- Include entities from the same parent table using two different
  foreign keys - @ruslantalpa\n- Ensure that Location header in 201 response is URL-encoded
  - @league\n- Fix garbage collector CPU leak - @ruslantalpa et al.\n- Return deleted
  items when return=representation header is sent - @ruslantalpa\n- Use table default
  values for empty object inserts - @begriffs\n\n## [0.3.1.1] - 2016-03-28\n\n###
  Fixed\n- Preserve unicode values in insert,update,rpc (regression) - @begriffs\n-
  Prevent duplicate call to stored procs (regression) - @begriffs\n- Allow SQL functions
  to generate registered JWT claims - @begriffs\n- Terminate gracefully on SIGTERM
  (for use in Docker) - @recmo\n- Relation detection fix for views that depend on
  multiple tables - @ruslantalpa\n- Avoid count on plurality=singular and allow multiple
  Prefer values - @ruslantalpa\n\n## [0.3.1.0] - 2016-02-28\n\n### Fixed\n- Prevent
  query error from infecting later connection - @begriffs, @ruslantalpa, @nikita-volkov,
  @jwiegley\n\n### Added\n- Applies range headers to RPC calls - @diogob\n\n## [0.3.0.4]
  - 2016-02-12\n\n### Fixed\n- Improved usage screen - @begriffs\n- Reject non-POSTs
  to rpc endpoints - @begriffs\n- Throw an error for OPTIONS on nonexistent tables
  - @calebmer\n- Remove deadlock on simultaneous contentious updates - @ruslantalpa,
  @begriffs\n\n## [0.3.0.3] - 2016-01-08\n\n### Fixed\n- Fix bug in many-many relation
  detection - @ruslantalpa\n- Inconsistent escaping of table names in read queries
  - @calebmer\n\n## [0.3.0.2] - 2015-12-16\n\n### Fixed\n- Miscalculation of time
  used for expiring tokens - @calebmer\n- Remove bcrypt dependency to fix Windows
  build - @begriffs\n- Detect relations event when authenticator does not have rights
  to intermediate tables - @ruslantalpa\n- Ensure db connections released on sigint
  - @begriffs\n- Fix #396 include records with missing parents - @ruslantalpa\n- `pgFmtIdent`
  always quotes #388 - @calebmer\n- Default schema, changed from `\"1\"` to `public`
  - @calebmer\n- #414 revert to separate count query - @ruslantalpa\n- Fix #399, allow
  inserting in tables with no select privileges using \"Prefer: representation=minimal\"
  - @ruslantalpa\n\n### Added\n- Allow order by computed columns - @diogob\n- Set
  max rows in response with --max-rows - @begriffs\n- Selection by column name (can
  detect if `_id` is not included) - @calebmer\n\n## [0.3.0.1] - 2015-11-27\n\n###
  Fixed\n- Filter columns on embedded parent items - @ruslantalpa\n\n## [0.3.0.0]
  - 2015-11-24\n\n### Fixed\n- Use reasonable amount of memory during bulk inserts
  - @begriffs\n\n### Added\n- Ensure JWT expires - @calebmer\n- Postgres connection
  string argument - @calebmer\n- Encode JWT for procs that return type `jwt_claims`
  - @diogob\n- Full text operators `@>`,`<@` - @ruslantalpa\n- Shaping of the response
  body (filter columns, embed relations) with &select parameter for POST/PATCH - @ruslantalpa\n-
  Detect relationships between public views and private tables - @calebmer\n- `Prefer:
  plurality=singular` for selecting single objects - @calebmer\n\n### Removed\n- API
  versioning feature - @calebmer\n- `--db-x` command line arguments - @calebmer\n-
  Secure flag - @calebmer\n- PUT request handling - @ruslantalpa\n\n### Changed\n-
  Embed foreign keys with {} rather than () - @begriffs\n- Remove version number from
  binary filename in release - @begriffs\n\n## [0.2.12.1] - 2015-11-12\n\n### Fixed\n-
  Correct order for -> and ->> in a json path - @ruslantalpa\n- Return empty array
  instead of 500 when a set returning function returns an empty result set - @diogob\n\n##
  [0.2.12.0] - 2015-10-25\n\n### Added\n- Embed associations, e.g. `/film?select=*,director(*)`
  - @ruslantalpa\n- Filter columns, e.g. `?select=col1,col2` - @ruslantalpa\n- Does
  not execute the count total if header \"Prefer: count=none\" - @diogob\n\n### Fixed\n-
  Tolerate a missing role in user creation - @calebmer\n- Avoid unnecessary text re-encoding
  - @ruslantalpa\n\n## [0.2.11.1] - 2015-09-01\n\n### Fixed\n- Accepts `*/*` in Accept
  header - @diogob\n\n## [0.2.11.0] - 2015-08-28\n### Added\n- Negate any filter in
  a uniform way, e.g. `?col=not.eq=foo` - @diogob\n- Call stored procedures\n- Filter
  NOT IN values, e.g. `?col=notin.1,2,3` - @rall\n- CSV responses to GET requests
  with `Accept: text/csv` - @diogob\n- Debian init scripts - @mkhon\n- Allow filters
  by computed columns - @diogob\n\n### Fixed\n- Reset user role on error\n- Compatible
  with Stack\n- Add materialized views to results in GET / - @diogob\n- Indicate insertable=true
  for views that are insertable through triggers - @diogob\n- Builds under GHC 7.10\n-
  Allow the use of columns named \"count\" in relations queried - @diogob\n\n## [0.2.10.0]
  - 2015-06-03\n### Added\n- Full text search, eg `/foo?text_vector=@@.bar`\n- Include
  auth id as well as db role to views (for row-level security)\n\n## [0.2.9.1] - 2015-05-20\n###
  Fixed\n- Put -Werror behind a cabal flag (for CI) so Hackage accepts package\n\n##
  [0.2.9.0] - 2015-05-20\n### Added\n- Return range headers in PATCH\n- Return PATCHed
  resources if header \"Prefer: return=representation\"\n- Allow nested objects and
  arrays in JSON post for jsonb columns\n- JSON Web Tokens - [Federico Rampazzo](https://github.com/framp)\n-
  Expose PostgREST as a Haskell package\n\n### Fixed\n- Return 404 if no records updated
  by PATCH\n\n## [0.2.8.0] - 2015-04-17\n### Added\n- Option to specify nulls first
  or last, eg `/people?order=age.desc.nullsfirst`\n- Filter nulls, `?col=is.null`
  and `?col=isnot.null`\n- Filter within jsonb, `?col->a->>b=eq.c`\n- Accept CSV in
  post body for bulk inserts\n\n### Fixed\n- Allow NULL values in posts\n- Show full
  command line usage on param errors\n\n## [0.2.7.0] - 2015-03-03\n### Added\n- Server
  response logging\n- Filter IN values, e.g. `?col=in.1,2,3`\n- Return POSTed resource
  if header \"Prefer: return=representation\"\n- Allow override of default (v1) schema\n\n##
  [0.2.6.0] - 2015-02-18\n### Added\n- A changelog\n- Filter by substring match, e.g.
  `?col=like.*hello*` (or ilike for\n  case insensitivity).\n- Access-Control-Expose-Headers
  for CORS\n\n### Fixed\n- Make filter position match docs, e.g. `?order=col.asc`
  rather\n  than `?order=asc.col`.\n"
basic-deps:
  warp: -any
  cookie: -any
  insert-ordered-containers: -any
  hasql: ==1.1
  either: -any
  bytestring: -any
  lens-aeson: -any
  wai-cors: -any
  wai: -any
  ansi-wl-pprint: -any
  case-insensitive: -any
  unix: -any
  heredoc: -any
  base: ! '>=4.8 && <4.10'
  time: -any
  base64-bytestring: -any
  unordered-containers: -any
  text: -any
  retry: -any
  gitrev: -any
  auto-update: -any
  jose: ==0.7.0.0
  parsec: -any
  protolude: ==0.2.2
  interpolatedstring-perl6: -any
  configurator-ng: ==0.0.0.1
  containers: -any
  lens: -any
  cassava: -any
  postgrest: -any
  Ranged-sets: ==0.3.0
  regex-tdfa: -any
  contravariant: -any
  network-uri: -any
  HTTP: -any
  swagger2: -any
  wai-extra: -any
  optparse-applicative: ! '>=0.13 && <0.15'
  scientific: -any
  wai-middleware-static: -any
  hasql-transaction: ==0.5.2
  http-types: -any
  hasql-pool: ==0.4.3
  aeson: -any
  contravariant-extras: -any
  vector: -any
all-versions:
- '0.2.5.0'
- '0.2.5.1'
- '0.2.5.2'
- '0.2.5.3'
- '0.2.6.0'
- '0.2.7.0'
- '0.2.8.0'
- '0.2.9.1'
- '0.2.10.0'
- '0.2.11.0'
- '0.2.11.1'
- '0.2.12.0'
- '0.2.12.1'
- '0.3.0.0'
- '0.3.0.1'
- '0.3.0.2'
- '0.3.0.3'
- '0.3.0.4'
- '0.3.1.0'
- '0.3.1.1'
- '0.3.2.0'
- '0.4.0.0'
- '0.4.1.0'
- '0.4.2.0'
- '0.4.3.0'
- '0.4.4.0'
- '0.5.0.0'
- '5.1.0'
author: Joe Nelson, Adam Baker
latest: '5.1.0'
description-type: haddock
description: ! 'Reads the schema of a PostgreSQL database and creates RESTful routes

  for the tables and views, supporting all HTTP verbs that security

  permits.'
license-name: MIT
