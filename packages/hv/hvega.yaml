homepage: https://github.com/DougBurke/hvega
changelog-type: markdown
hash: 20e38956e5e8e3729cd20774a0aac15f22acf862552cdc955a50bc1e5d084ee9
test-bench-deps: {}
maintainer: dburke.gw@gmail.com
synopsis: Create Vega-Lite visualizations (version 3) in Haskell.
changelog: |
  For the latest version of this document, please see
  [https://github.com/DougBurke/hvega/blob/master/hvega/CHANGELOG.md](https://github.com/DougBurke/hvega/blob/master/hvega/CHANGELOG.md).

  ## 0.3.0.1

  The minimum base version has been bumped from 4.7 to 4.9, which
  means ghc 8.0 or later. This is because the 0.2.0.1 release
  does not appear to build with ghc 7.10. If this restriction is
  a problem then please comment on the issues list.

  There have been minor documentation updates, adding `@since`
  annotations.

  ## 0.3.0.0

  The `Channel` type has been extended to include `ChFill` and `ChStroke`
  constructors and the `tooltips` function allows you to provide
  multiple tooltips for a channel. The schema version has been changed
  from 2 to 3, but there has been limited checking to see if the API
  correctly reflects the new schema.

  This functionality was provided by Adam Massmann (massma) and
  BinderDavid.

  ## 0.2.1.0

  Added the `toHtml` and `toHtmlFile` functions which create the necessary
  HTML to view the  Vega-Lite visualization using
  [Vega Embed](https://vega.github.io/vega-lite/usage/embed.html)
  (this is similar to how
  [ihaskell-hvega](https://hackage.haskell.org/package/ihaskell-hvega)
  works).

  This functionality was provided by Gregory Schwartz; apologies for
  taking so long to get it released.

  ## 0.2.0.0

  The constructors for the LegendOrientation type have been renamed (by
  adding the prefix `LO`) which avoids the name clash with `Left` and `Right`
  seen in earlier releases. This is a breaking API change.

  Clarify how to use the library in the main `hvega` module.

  Thanks to contributions from Nicolas Mattia (nmattia) and Marco Zocca (ocramz).

  ## 0.1.0.3

  The only change is to the cabal file, where `cabal-version: >=1.18` has
  been changed to `cabal-version: 1.18`.

  ## 0.1.0.2

  Updated the upper bounds of `aeson` to really allow v1.4. This was not
  released on Hackage.

  ## 0.1.0.1

  Updated the upper bounds of `aeson` from v1.2 to v1.4.

  The cabal package now includes `stack.yaml` and `default.nix` (although
  the latter is *not* guaranteed to be correct), as well as a
  change log and an extra image.

  ## 0.1.0.0

  This is the initial version of `hvega`, which is based on
  version 2.2.1 of the
  [Elm Vega library](http://package.elm-lang.org/packages/gicentre/elm-vega/2.2.1/VegaLite).
basic-deps:
  base: ! '>=4.9 && <5'
  text: ==1.2.*
  aeson: ! '>=0.11 && <1.5'
  vector: ! '>=0.11 && <0.13'
all-versions:
- 0.1.0.0
- 0.1.0.1
- 0.1.0.3
- 0.2.0.0
- 0.2.1.0
- 0.3.0.0
- 0.3.0.1
author: Douglas Burke
latest: 0.3.0.1
description-type: markdown
description: |
  # hvega

  Support the creation of [Vega-Lite](https://vega.github.io/vega-lite/) visualizations
  in Haskell. This code is released under the BSD3 license.

  It is an almost-direct copy of version 2.2.1 of the
  [Elm Vega library](http://package.elm-lang.org/packages/gicentre/elm-vega/2.2.1/VegaLite),
  which is released under a BSD3 license by Jo Wood of the giCentre at the
  City University of London.

  ## Example

  ```Haskell
  let cars =  dataFromUrl "https://vega.github.io/vega-datasets/data/cars.json" []

      enc = encoding
              . position X [ PName "Horsepower", PmType Quantitative ]
              . position Y [ PName "Miles_per_Gallon", PmType Quantitative ]
              . color [ MName "Origin", MmType Nominal ]

      bkg = background "rgba(0, 0, 0, 0.05)"

  in toVegaLite [ bkg, cars, mark Circle [], enc [] ]
  ```

  When viewed with a Vega-Lite aware viewer, the resultant plot is

  ![Simple scatterplot](https://raw.githubusercontent.com/DougBurke/hvega/master/hvega/images/intro.png "Simple scatterplot")

  ## Documentation

  The [Elm Vega documentation](http://package.elm-lang.org/packages/gicentre/elm-vega/2.2.1)
  can be used as a guide to using this module. The
  [Vega-Lite Example Gallery](https://vega.github.io/vega-lite/examples/) has
  been converted to an
  [IHaskell notebook](https://github.com/DougBurke/hvega/blob/master/notebooks/VegaLiteGallery.ipynb)
  Uunfortunately the plots created by VegaEmbed **do not appear**
  in the notebook when viewed with either GitHub's viewer or
  [ipynb viewer](http://nbviewer.jupyter.org/github/DougBurke/hvega/blob/master/notebooks/VegaLiteGallery.ipynb),
  but things seem much better when using Jupyter Lab (rather than
  notebook) to create the notebooks (since Vega is natively
  supported in this environment). The notebooks have been re-created
  using Jupyter Lab (thanks to Tweag I/O's
  [JupyterWith environment](https://www.tweag.io/posts/2019-02-28-jupyter-with.html)), which should make the plots appear on GitHub (you may need
  to reload the notebooks as I find they don't display on the
  first try).

  The [notebooks directory](https://github.com/DougBurke/hvega/tree/master/notebooks)
  contains a poorly-curated set of examples and experiments with hvega.

  ## Differences to Elm Vega

  The main changes to version 2.2.1 of
  [Elm Vega](http://package.elm-lang.org/packages/gicentre/elm-vega/2.2.1)
  are:

  - Replace `Spec` by `VLSpec` (although both are synonyms for the underlying
    JSON representation).

  - Add a type for the output of `toVegaLite` (`VegaLite`) that is separate from
    `VLSpec`, which is usefull for integration with IHaskell. The JSON
    specification is retrieved with `fromVL`.

  - Take advantage of the lack of backwards compatibality requirements to remove or
    replace several symbols (such as add the `Utc` constructor to `TimeUnit`, remove the `bin`
    function, and use `Data` rather than `(VLProperty, VLSpec)` in function
    signatures).

  - In version 0.2.0.0, the constructors for the `LegendOrientation` type
    have gained a `LO` prefix, which avoids clashing with the Prelude's
    `Either` type.
license-name: BSD-3-Clause
